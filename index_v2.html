<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>宇宙无敌我最健 - 苏浩楠报名通道</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: #1a202c; /* Tailwind gray-900 */
            color: #e2e8f0; /* Tailwind gray-300 */
        }
        .font-noto-sans-sc {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
        }
        .gold-text {
            background-image: linear-gradient(to right, #facc15, #eab308, #ca8a04); /* Tailwind yellow-400 to amber-600 */
        }
        .fire-text {
            background-image: linear-gradient(to right, #ef4444, #f97316, #f59e0b); /* Tailwind red-500 to orange-500 */
        }
        .btn-golden {
            background-image: linear-gradient(to right, #facc15 0%, #eab308 50%, #ca8a04 100%);
            transition: all 0.3s ease;
            background-size: 200% auto;
        }
        .btn-golden:hover {
            background-position: right center;
            box-shadow: 0 0 20px #eab308;
        }
        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(250, 204, 21, 0.3), 0 4px 6px -2px rgba(250, 204, 21, 0.15);
        }
        
        /* Carousel Styles */
        .carousel-container {
            position: relative;
            overflow: hidden;
        }
        .carousel-track {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .carousel-item {
            flex: 0 0 100%; /* Each item takes full width of container */
            min-width: 0; /* Fix for flex items in some browsers */
        }
        .carousel-item-rival {
            flex: 0 0 auto; /* Let rival cards take their defined width */
            min-width: 0;
            scroll-snap-align: start; /* For potential future scroll-snap */
        }

        .carousel-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 0.75rem; /* Increased padding */
            cursor: pointer;
            z-index: 10;
            border-radius: 50%; /* Circular buttons */
            width: 3rem; /* Fixed width */
            height: 3rem; /* Fixed height */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }
        .carousel-button:hover {
            background-color: rgba(250, 204, 21, 0.8); /* Yellowish on hover */
            color: #1a202c;
        }
        .carousel-button.prev {
            left: 1rem;
        }
        .carousel-button.next {
            right: 1rem;
        }
        .carousel-button svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        /* Modal styles */
        .modal {
            transition: opacity 0.25s ease;
        }
        .modal-content {
            transition: transform 0.25s ease;
        }

        /* Styling for rival carousel to show one card more prominently */
        .rivals-carousel-container {
            padding: 0 0px; /* Adjust if you want peeking cards */
        }
        .rival-card {
             width: 280px; /* Original width */
             margin-right: 1.5rem; /* Spacing between cards */
             transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .rival-card:last-child {
            margin-right: 0;
        }
        /* Add a bit more flair to rival cards on hover within carousel */
        .rival-card.cursor-pointer:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 10px 20px rgba(250, 204, 21, 0.4), 0 6px 6px rgba(250, 204, 21, 0.2);
        }

    </style>
</head>
<body class="antialiased">

    <header class="py-12 text-center bg-gray-800 shadow-xl">
        <h1 class="text-5xl md:text-7xl font-black gradient-text gold-text font-noto-sans-sc tracking-wider">宇宙<span class="text-red-500">无敌</span>我最<span class="text-red-500">健</span></h1>
        <p class="mt-4 text-xl md:text-3xl text-yellow-400 font-bold font-noto-sans-sc">苏浩楠，是时候<span class="gradient-text fire-text">制霸全场</span>了！</p>
    </header>

    <main class="container mx-auto px-4 py-12">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 items-start">
            <section class="lg:col-span-2 bg-gray-800 p-8 rounded-xl shadow-2xl border-2 border-yellow-500">
                <h2 class="text-3xl font-bold mb-8 text-center gradient-text fire-text font-noto-sans-sc">猛男<span class="text-yellow-400">苏浩楠</span>在此！填写报名表，开始你的传说！</h2>
                
                <div class="mb-8 text-center">
                    <div id="suHaonanCarousel" class="carousel-container w-64 h-64 md:w-80 md:h-80 mx-auto rounded-full border-4 border-yellow-400 shadow-lg">
                        <div id="suHaonanTrack" class="carousel-track h-full">
                            <div class="carousel-item h-full">
                                <img src="../img/01.jpg?text=苏浩楠+造型1" alt="苏浩楠靓照1" class="w-full h-full object-cover rounded-full">
                            </div>
                            <div class="carousel-item h-full">
                                <img src="../img/02.jpg?text=苏浩楠+造型1" alt="苏浩楠靓照2" class="w-full h-full object-cover rounded-full">
                            </div>
                            <div class="carousel-item h-full">
                                <img src="../img/03.jpg?text=苏浩楠+造型1" alt="苏浩楠靓照3" class="w-full h-full object-cover rounded-full">
                            </div>
                            <div class="carousel-item h-full">
                                <img src="../img/04.jpg?text=苏浩楠+造型1" alt="苏浩楠靓照3" class="w-full h-full object-cover rounded-full">
                            </div>
                        </div>
                        <button id="suHaonanPrev" class="carousel-button prev">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
                        </button>
                        <button id="suHaonanNext" class="carousel-button next">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                        </button>
                    </div>
                    <p class="mt-4 text-sm text-gray-400 font-noto-sans-sc">左右滑动，欣赏苏师傅的盖世风采！</p>
                </div>

                <form id="registrationForm" class="space-y-6">
                    <div>
                        <label for="name" class="block text-lg font-semibold text-yellow-400 mb-1 font-noto-sans-sc">大名鼎鼎的你<span class="text-red-500">*</span></label>
                        <input type="text" id="name" name="name" value="苏浩楠 (本尊驾到，禁止修改)" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-300 focus:ring-2 focus:ring-yellow-500 focus:border-transparent placeholder-gray-500" readonly>
                    </div>
                    <div>
                        <label for="declaration" class="block text-lg font-semibold text-yellow-400 mb-1 font-noto-sans-sc">参赛宣言 (霸气一点！)</label>
                        <textarea id="declaration" name="declaration" rows="3" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:ring-2 focus:ring-yellow-500 focus:border-transparent placeholder-gray-500 font-noto-sans-sc" placeholder="例如：不夺冠，我直播倒立洗头！或者，我来，我见，我征服！"></textarea>
                    </div>
                    <div>
                        <label for="muscles" class="block text-lg font-semibold text-yellow-400 mb-1 font-noto-sans-sc">主要展示肌肉部位 (炫耀一下！)</label>
                        <input type="text" id="muscles" name="muscles" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:ring-2 focus:ring-yellow-500 focus:border-transparent placeholder-gray-500 font-noto-sans-sc" placeholder="肱二头肌？腹肌？还是迷人的微笑？(如果你有的话)">
                    </div>
                    <div>
                        <label for="secretWeapon" class="block text-lg font-semibold text-yellow-400 mb-1 font-noto-sans-sc">秘密武器 (偷偷告诉我)</label>
                        <input type="text" id="secretWeapon" name="secretWeapon" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:ring-2 focus:ring-yellow-500 focus:border-transparent placeholder-gray-500 font-noto-sans-sc" placeholder="例如：我妈做的氮泵鸡胸肉 / 祖传的神秘药膏">
                    </div>
                    <div>
                        <label for="contact" class="block text-lg font-semibold text-yellow-400 mb-1 font-noto-sans-sc">联系方式 (方便对手约战或粉丝送礼)</label>
                        <input type="text" id="contact" name="contact" class="w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-gray-200 focus:ring-2 focus:ring-yellow-500 focus:border-transparent placeholder-gray-500 font-noto-sans-sc" placeholder="打钱还是约战？尽管来！邮箱/电话/VX号">
                    </div>
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="terms" name="terms" class="h-5 w-5 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-2 focus:ring-offset-gray-800 focus:ring-yellow-500">
                        <label for="terms" class="text-sm text-gray-300 font-noto-sans-sc">我已阅读并同意 <a href="#" class="text-yellow-400 hover:text-yellow-300 underline font-semibold">“宇宙最健专属霸王条款”</a> (解释权归苏浩楠所有)</label>
                    </div>
                    <button type="submit" class="w-full btn-golden text-gray-900 font-bold py-4 px-6 rounded-lg text-xl hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out font-noto-sans-sc">
                        制霸赛场，就差这一步！ (点击提交)
                    </button>
                </form>
            </section>

            <aside class="lg:col-span-1 bg-gray-800 p-6 rounded-xl shadow-xl border border-gray-700">
                <h3 class="text-2xl font-bold text-yellow-400 mb-6 text-center font-noto-sans-sc">赛事快讯 & 花絮</h3>
                <div class="space-y-4">
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h4 class="font-semibold text-yellow-300 font-noto-sans-sc">“肌”动人心奖杯曝光！</h4>
                        <p class="text-sm text-gray-400 mt-1 font-noto-sans-sc">纯金打造，镶嵌88颗钻石，专为冠军准备！</p>
                    </div>
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h4 class="font-semibold text-yellow-300 font-noto-sans-sc">特邀评论员：健身房王大爷</h4>
                        <p class="text-sm text-gray-400 mt-1 font-noto-sans-sc">“小伙子们，练得不错，但跟我比还差点意思。”</p>
                    </div>
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <h4 class="font-semibold text-yellow-300 font-noto-sans-sc">紧急通知：蛋白粉售罄！</h4>
                        <p class="text-sm text-gray-400 mt-1 font-noto-sans-sc">选手们热情高涨，补货正在路上！</p>
                    </div>
                </div>
            </aside>
        </div>

        <section class="mt-16 py-12 bg-gray-800 rounded-xl shadow-2xl border-2 border-yellow-500">
            <h2 class="text-4xl font-black text-center mb-10 gradient-text fire-text font-noto-sans-sc">
                <span class="text-yellow-400">颤抖吧，凡人！</span>你的对手们已<span class="text-red-500">集结完毕</span>！
            </h2>
            <div id="rivalsCarousel" class="carousel-container rivals-carousel-container mx-auto max-w-xs sm:max-w-xl md:max-w-3xl lg:max-w-5xl xl:max-w-6xl">
                <div id="rivalsTrack" class="carousel-track">
    <div class="carousel-item-rival rival-card bg-gray-700 rounded-xl p-6 shadow-lg border border-gray-600 cursor-pointer" data-name="彭于晏" data-img="https://img2.baidu.com/it/u=318661164,1242711960&fm=253&fmt=auto&app=120&f=JPEG?w=500&h=889" data-quote="小苏，听说你也很努力？放马过来，腹肌可不是P出来的！我在顶峰等你！" data-threat="★★★★☆" data-fans="9,876,543">
        <img src="https://img2.baidu.com/it/u=318661164,1242711960&fm=253&fmt=auto&app=120&f=JPEG?w=500&h=889" alt="彭于晏" class="w-full h-56 object-cover rounded-lg mb-4 border-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400 mb-2 font-noto-sans-sc">彭于晏</h3>
        <p class="text-sm text-gray-300 mb-3 font-noto-sans-sc h-16 overflow-hidden">“小苏，身材不错哦，但腹肌还是我比较顶！”</p>
        <div class="text-xs text-gray-400 space-y-1">
            <p>威胁指数：<span class="text-red-500 font-bold">★★★★☆</span></p>
            <p>粉丝尖叫声 (分贝)：<span class="text-yellow-300 font-bold">9,876,543</span></p>
        </div>
    </div>
    <div class="carousel-item-rival rival-card bg-gray-700 rounded-xl p-6 shadow-lg border border-gray-600 cursor-pointer" data-name="阿诺·施瓦辛格" data-img="https://img2.baidu.com/it/u=3824643498,1818735788&fm=253&fmt=auto?w=608&h=886" data-quote="I'll be back... to show you what REAL muscle is, Su! Hasta la vista, baby!" data-threat="★★★★★" data-fans="15,000,000+">
        <img src="https://img2.baidu.com/it/u=3824643498,1818735788&fm=253&fmt=auto?w=608&h=886" alt="阿诺·施瓦辛格" class="w-full h-56 object-cover rounded-lg mb-4 border-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400 mb-2 font-noto-sans-sc">阿诺·施瓦辛格</h3>
        <p class="text-sm text-gray-300 mb-3 font-noto-sans-sc h-16 overflow-hidden">"I'll be back... to take the trophy, kiddo!"</p>
        <div class="text-xs text-gray-400 space-y-1">
            <p>威胁指数：<span class="text-red-500 font-bold">★★★★★</span></p>
            <p>粉丝尖叫声 (分贝)：<span class="text-yellow-300 font-bold">15,000,000+</span></p>
        </div>
    </div>
    <div class="carousel-item-rival rival-card bg-gray-700 rounded-xl p-6 shadow-lg border border-gray-600 cursor-pointer" data-name="道恩·强森 (巨石)" data-img="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Dwayne_Johnson_2%2C_2013.jpg/800px-Dwayne_Johnson_2%2C_2013.jpg" data-quote="Yo, Su! This ain't no movie. This is REAL. Gonna need more than just the eye of the tiger. Adrian!" data-threat="★★★★★" data-fans="12,345,678">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Dwayne_Johnson_2%2C_2013.jpg/800px-Dwayne_Johnson_2%2C_2013.jpg" alt="道恩·强森 (巨石)" class="w-full h-56 object-cover rounded-lg mb-4 border-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400 mb-2 font-noto-sans-sc">道恩·强森 (巨石)</h3>
        <p class="text-sm text-gray-300 mb-3 font-noto-sans-sc h-16 overflow-hidden">"Yo, Su! Gonna need more than just eye of the tiger for this one!"</p>
        <div class="text-xs text-gray-400 space-y-1">
            <p>威胁指数：<span class="text-red-500 font-bold">★★★★★</span></p>
            <p>粉丝尖叫声 (分贝)：<span class="text-yellow-300 font-bold">12,345,678</span></p>
        </div>
    </div>
    <div class="carousel-item-rival rival-card bg-gray-700 rounded-xl p-6 shadow-lg border border-gray-600 cursor-pointer" data-name="克里斯·海姆斯沃斯 (雷神)" data-img="https://img2.baidu.com/it/u=490158620,1563342730&fm=253&fmt=auto&app=120&f=JPEG?w=660&h=429" data-quote="Can you SMEEEEEELL what The Rock is cookin'? It's victory, Su, and you ain't even on the menu, jabroni! Know your role and shut your mouth!" data-threat="★★★★★" data-fans="20,000,000+">
        <img src="https://img2.baidu.com/it/u=490158620,1563342730&fm=253&fmt=auto&app=120&f=JPEG?w=660&h=429" alt="克里斯·海姆斯沃斯 (雷神)" class="w-full h-56 object-cover rounded-lg mb-4 border-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400 mb-2 font-noto-sans-sc">克里斯·海姆斯沃斯 (雷神)</h3>
        <p class="text-sm text-gray-300 mb-3 font-noto-sans-sc h-16 overflow-hidden">"Can you smell what The Rock is cookin'? It's victory, and you're not on the menu!"</p>
        <div class="text-xs text-gray-400 space-y-1">
            <p>威胁指数：<span class="text-red-500 font-bold">★★★★★</span></p>
            <p>粉丝尖叫声 (分贝)：<span class="text-yellow-300 font-bold">20,000,000+</span></p>
        </div>
    </div>
    <div class="carousel-item-rival rival-card bg-gray-700 rounded-xl p-6 shadow-lg border border-gray-600 cursor-pointer" data-name="苏浩楠养的狗" data-img="https://pic.rmb.bdstatic.com/bjh/events/850470e49666b0bfc6cf16f809769e9c4127.png@h_1280" data-quote="吾乃雷神索尔，阿斯加德之子！苏浩楠，汝这米德加尔特的凡人，安敢与吾争夺这宇宙最健的荣耀？拿起你的哑铃，让吾看看你的斤两！为了奥丁！" data-threat="★★★★★☆" data-fans="跨次元级">
        <img src="https://pic.rmb.bdstatic.com/bjh/events/850470e49666b0bfc6cf16f809769e9c4127.png@h_1280" alt="苏浩楠养的狗" class="w-full h-56 object-cover rounded-lg mb-4 border-2 border-yellow-400">
        <h3 class="text-2xl font-bold text-yellow-400 mb-2 font-noto-sans-sc">苏浩楠养的狗</h3>
        <p class="text-sm text-gray-300 mb-3 font-noto-sans-sc h-16 overflow-hidden">“吾乃雷神索尔，尔等凡人，安敢与吾争锋？”</p>
        <div class="text-xs text-gray-400 space-y-1">
            <p>威胁指数：<span class="text-red-500 font-bold">★★★★★☆</span></p>
            <p>粉丝尖叫声 (分贝)：<span class="text-yellow-300 font-bold">跨次元级</span></p>
        </div>
    </div>
</div>
                </div>
                <button id="rivalsPrev" class="carousel-button prev -ml-4 md:-ml-8"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
                </button>
                <button id="rivalsNext" class="carousel-button next -mr-4 md:-mr-8"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                </button>
            </div>
        </section>
    </main>

    <footer class="mt-16 py-10 bg-gray-900 border-t-4 border-yellow-600 text-center">
        <p class="text-lg text-yellow-400 font-bold font-noto-sans-sc">宇宙无敌我最健组委会 - 专为苏浩楠打造的巅峰之路</p>
        <p class="mt-2 text-sm text-gray-500 font-noto-sans-sc">© 2025 苏浩楠粉丝后援会荣誉出品</p>
        <div class="mt-4 text-xs text-gray-600 font-noto-sans-sc">
            <p>友情赞助 (排名不分先后):</p>
            <p>老干妈牌能量胶囊 | 霸王增肌洗发水 | 板蓝根牌运动饮料 | 金坷垃牌蛋白粉 (非洲农业不发达，我们去支援他！)</p>
        </div>
    </footer>

    <div id="rivalModal" class="modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
        <div class="modal-content bg-gray-800 p-6 md:p-8 rounded-xl shadow-2xl w-full max-w-lg border-2 border-yellow-500 transform scale-95">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modalRivalName" class="text-3xl font-bold gradient-text fire-text font-noto-sans-sc">挑战者宣言</h2>
                <button id="closeModalBtn" class="text-gray-400 hover:text-yellow-400 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <img id="modalRivalImg" src="https://placehold.co/400x300/374151/eab308?text=对手靓照" alt="Rival Image" class="w-full h-64 object-contain rounded-lg mb-6 border-2 border-yellow-400">
            <p id="modalRivalQuote" class="text-lg text-gray-200 mb-4 leading-relaxed font-noto-sans-sc text-center"></p>
            <div class="text-center text-sm text-gray-400 font-noto-sans-sc">
                <p>威胁指数：<span id="modalRivalThreat" class="text-red-400 font-bold"></span></p>
                <p>粉丝尖叫声：<span id="modalRivalFans" class="text-yellow-300 font-bold"></span></p>
            </div>
             <button id="modalActionBtn" class="mt-6 w-full btn-golden text-gray-900 font-bold py-3 px-6 rounded-lg text-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out font-noto-sans-sc">
                放马过来！
            </button>
        </div>
    </div>

    <script>
        // --- Generic Carousel Logic ---
        function setupCarousel(carouselId, trackId, prevBtnId, nextBtnId, itemClass) {
            const carousel = document.getElementById(carouselId);
            if (!carousel) return; // Exit if carousel element doesn't exist

            const track = document.getElementById(trackId);
            const prevButton = document.getElementById(prevBtnId);
            const nextButton = document.getElementById(nextBtnId);
            const items = track.querySelectorAll(itemClass === '.carousel-item-rival' ? '.rival-card' : '.carousel-item'); // Adjusted selector for rivals

            if (!track || !prevButton || !nextButton || items.length === 0) {
                console.warn(`Carousel setup incomplete for ${carouselId}. Elements missing.`);
                if(prevButton) prevButton.style.display = 'none';
                if(nextButton) nextButton.style.display = 'none';
                return;
            }
            
            let currentIndex = 0;
            let itemWidth = 0; // Will be calculated
            let itemsPerPage = 1; // Default for Su Haonan, will be calculated for rivals

            function calculateMetrics() {
                if (items.length === 0) return;
                
                if (itemClass === '.carousel-item-rival') { // Rivals carousel
                    const card = items[0];
                    const cardStyle = window.getComputedStyle(card);
                    itemWidth = card.offsetWidth + parseFloat(cardStyle.marginRight);
                    
                    const trackVisibleWidth = track.offsetWidth;
                    itemsPerPage = Math.max(1, Math.floor(trackVisibleWidth / itemWidth));
                } else { // Su Haonan carousel
                    itemWidth = items[0].offsetWidth;
                    itemsPerPage = 1;
                }
            }

            function updateCarousel() {
                if (items.length === 0) return;
                const offset = -currentIndex * itemWidth;
                track.style.transform = `translateX(${offset}px)`;

                // Disable/Enable buttons
                prevButton.disabled = currentIndex === 0;
                prevButton.style.opacity = currentIndex === 0 ? '0.5' : '1';
                prevButton.style.cursor = currentIndex === 0 ? 'not-allowed' : 'pointer';

                const maxIndex = itemClass === '.carousel-item-rival' 
                               ? Math.max(0, items.length - itemsPerPage) 
                               : items.length - 1;

                nextButton.disabled = currentIndex >= maxIndex;
                nextButton.style.opacity = currentIndex >= maxIndex ? '0.5' : '1';
                nextButton.style.cursor = currentIndex >= maxIndex ? 'not-allowed' : 'pointer';
            }
            
            prevButton.addEventListener('click', () => {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateCarousel();
                }
            });

            nextButton.addEventListener('click', () => {
                const maxIndex = itemClass === '.carousel-item-rival' 
                               ? Math.max(0, items.length - itemsPerPage) 
                               : items.length - 1;
                if (currentIndex < maxIndex) {
                    currentIndex++;
                    updateCarousel();
                }
            });

            // Initial setup
            calculateMetrics();
            updateCarousel();

            // Recalculate on window resize
            window.addEventListener('resize', () => {
                calculateMetrics();
                // Adjust currentIndex if it's out of bounds after resize
                const maxIndex = itemClass === '.carousel-item-rival' 
                               ? Math.max(0, items.length - itemsPerPage) 
                               : items.length - 1;
                if (currentIndex > maxIndex) {
                    currentIndex = maxIndex;
                }
                updateCarousel();
            });
        }

        // Initialize Su Haonan Carousel
        setupCarousel('suHaonanCarousel', 'suHaonanTrack', 'suHaonanPrev', 'suHaonanNext', '.carousel-item');
        
        // Initialize Rivals Carousel
        setupCarousel('rivalsCarousel', 'rivalsTrack', 'rivalsPrev', 'rivalsNext', '.carousel-item-rival');


        // --- Form Submission (remains the same) ---
        const registrationForm = document.getElementById('registrationForm');
        if (registrationForm) {
            registrationForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const submitButton = registrationForm.querySelector('button[type="submit"]');
                const originalButtonText = submitButton.textContent;
                submitButton.textContent = '报名信息已收到，苏师傅准备起飞！🚀';
                submitButton.disabled = true;
                
                setTimeout(() => {
                     submitButton.textContent = originalButtonText;
                     submitButton.disabled = false;
                }, 3000);

                let messageDiv = document.getElementById('submitMessage');
                if (!messageDiv) {
                    messageDiv = document.createElement('div');
                    messageDiv.id = 'submitMessage';
                    messageDiv.className = 'text-center text-green-400 font-bold mt-4 font-noto-sans-sc';
                    submitButton.parentNode.insertBefore(messageDiv, submitButton.nextSibling);
                }
                messageDiv.textContent = '苏浩楠的报名表已光速提交！宇宙最健，指日可待！';
                setTimeout(() => {
                    if(document.getElementById('submitMessage')) {
                        document.getElementById('submitMessage').remove();
                    }
                }, 4000);
            });
        }
        
        // --- Rival Modal Functionality (remains largely the same) ---
        const rivalModal = document.getElementById('rivalModal');
        const modalRivalName = document.getElementById('modalRivalName');
        const modalRivalImg = document.getElementById('modalRivalImg');
        const modalRivalQuote = document.getElementById('modalRivalQuote');
        const modalRivalThreat = document.getElementById('modalRivalThreat');
        const modalRivalFans = document.getElementById('modalRivalFans');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const modalActionBtn = document.getElementById('modalActionBtn');

        const rivalCardsForModal = document.querySelectorAll('.rival-card'); // Use a different variable name to avoid conflict

        rivalCardsForModal.forEach(card => {
            card.addEventListener('click', () => {
                modalRivalName.textContent = `${card.dataset.name} 的挑衅`;
                modalRivalImg.src = card.dataset.img;
                modalRivalQuote.textContent = card.dataset.quote;
                modalRivalThreat.textContent = card.dataset.threat;
                modalRivalFans.textContent = card.dataset.fans;
                
                rivalModal.classList.remove('opacity-0', 'pointer-events-none');
                rivalModal.querySelector('.modal-content').classList.remove('scale-95');
                rivalModal.querySelector('.modal-content').classList.add('scale-100');
            });
        });

        function closeModal() {
            rivalModal.querySelector('.modal-content').classList.remove('scale-100');
            rivalModal.querySelector('.modal-content').classList.add('scale-95');
            rivalModal.classList.add('opacity-0');
            setTimeout(() => {
                rivalModal.classList.add('pointer-events-none');
            }, 250);
        }

        if (closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
        if (modalActionBtn) modalActionBtn.addEventListener('click', closeModal);
        if (rivalModal) {
            rivalModal.addEventListener('click', (event) => {
                if (event.target === rivalModal) {
                    closeModal();
                }
            });
        }
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && rivalModal && !rivalModal.classList.contains('pointer-events-none')) {
                closeModal();
            }
        });
    </script>
</body>
</html>
